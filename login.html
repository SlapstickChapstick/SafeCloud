<!DOCTYPE html>
<html>
    <head>
        <title>Login - SafeScript</title>
        <meta charset="utf-8"/>
        <link type="text/css" rel="stylesheet" href="styles/login.css">
        <link rel="preconnect" href="https://fonts.gstatic.com">
        <link href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300;0,400;0,600;0,700;0,800;1,300;1,400;1,600;1,700;1,800&display=swap" rel="stylesheet">
        <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
        <script>
            $(document).ready(function() {
                $("form").on("submit", function(event) {
                    event.preventDefault();
                    var formValues = $(this).serialize();

                    $.post("https://phpstack-577923-1869377.cloudwaysapps.com/safecloud/users/login.php" , formValues, function(data) {
                        const login_result = JSON.parse(data);
                        console.log(login_result);
                        if(login_result.LoggedIn === "false") {
                            $('#result').html("Incorrect email or password. Please try again.");
                            $('#result').css("color", "rgb(205, 92, 92)")
                        }
                        else {
                            window.location = "./pages/home.html";
                        }
                    });
                });
            });
        </script>
    </head>
    <body>
        <div id="container">
            <div id="content">
                <div id="login-card">
                    <form id="login-form">
                        <h1>Welcome!</h1>
                        <div id="result">PLACEHOLDER</div>
                        <input type="email" placeholder="Email" name="Email" required>
                        <input type="password" placeholder="Password" name="Password" required>
                        <input class="submit-btn" type="submit">
                    </form>
                </div>
            </div>
        </div>
        <div id="footer">
            &copy;
            <span id="copyright">
                <script>document.getElementById('copyright').appendChild(document.createTextNode(new Date().getFullYear()))</script>
            </span>
            - Team Safehouse
        </div>
    </body>
    <script>
    </script>
</html>